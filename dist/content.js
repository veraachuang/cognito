(()=>{console.log("[Cognito] Content script initialized");let e=null,t=!1;function n(){const e=location.pathname.match(/\/document\/(?:u\/\d+\/)?d\/([^/]+)/)||location.pathname.match(/\/d\/([^/]+)/);return e&&e[1]||new URLSearchParams(location.search).get("id")||null}function o(n=null){e||e||(e=document.createElement("iframe"),e.src=chrome.runtime.getURL("frontend/sidebar.html"),e.id="cognito-sidebar",e.style.cssText="\n    position: fixed; top: 0; right: -350px;\n    width: 350px; height: 100vh;\n    border: none; z-index: 9999;\n    transition: right 0.3s ease;\n  ",document.body.appendChild(e)),t=!t,e.style.right=t?"0":"-350px",[".docs-editor-container",".docs-editor",".docs-content-wrapper"].map((e=>document.querySelector(e))).forEach((e=>{e&&(e.style.width=t?"calc(100% - 350px)":"100%",e.style.transition="width 0.3s ease")})),n&&t&&setTimeout((()=>{e?.contentWindow?.postMessage({action:"switchTab",tab:n},"*")}),300)}window.addEventListener("message",(t=>{"sidebarReady"===t.data?.action&&e?.contentWindow&&e.contentWindow.postMessage({action:"docId",value:n()},"*")})),chrome.runtime.onMessage.addListener(((e,t,n)=>("toggleSidebar"===e.action?(o(e.tab),n({success:!0})):n({success:!1,error:"Unknown action"}),!0))),window.addEventListener("message",(t=>{t.source===e?.contentWindow&&"closeSidebar"===t.data?.action&&o()}))})();